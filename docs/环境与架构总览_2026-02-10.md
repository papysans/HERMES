# Hermes ç¯å¢ƒä¸æ¶æ„æ€»è§ˆ

> ğŸ“… åˆ›å»ºæ—¥æœŸ: 2026-02-10
> ğŸ“Œ ç‰ˆæœ¬: V1.1
> ğŸ¯ ç›®æ ‡: è®°å½• Hermes é¡¹ç›®çš„å®Œæ•´ç¯å¢ƒä¿¡æ¯ã€æ¶æ„ã€é…ç½®å’Œå½“å‰çŠ¶æ€ï¼Œé¿å…é‡å¤æ’æŸ¥

---

## 1. ç³»ç»Ÿç¯å¢ƒ

| é¡¹ç›® | å€¼ |
|------|-----|
| æœºå™¨ | Mac Mini (macOS) |
| ç”¨æˆ· (OpenCode) | `napstablook` |
| ç”¨æˆ· (OpenClaw) | `openclaw` |
| Shell | zsh |
| Node.js (OpenClaw) | v22.22.0 (`/Users/openclaw/.nvm/versions/node/v22.22.0`) |
| OpenClaw ç‰ˆæœ¬ | v2026.2.6-3 (æœ‰ v2026.2.9 å¯æ›´æ–°) |
| OpenClaw å®‰è£…è·¯å¾„ | `/Users/openclaw/.nvm/versions/node/v22.22.0/lib/node_modules/openclaw/` |

---

## 2. æœåŠ¡ç«¯å£

| æœåŠ¡ | ç«¯å£ | è¯´æ˜ |
|------|------|------|
| OpenCode HTTP Server | `localhost:4096` | OpenCode TUI çš„ HTTP API |
| OpenClaw Gateway | `localhost:18789` | OpenClaw ç½‘å…³ï¼Œæ¥æ”¶ webhook |
| Kiro Proxy | `localhost:10086` | Kiro ä»£ç†ï¼ˆç»™ OpenClaw ç”¨çš„ Claude æ¨¡å‹ï¼‰ |

---

## 3. æ ¸å¿ƒæ–‡ä»¶è·¯å¾„

### OpenCode ä¾§ (napstablook ç”¨æˆ·)

| æ–‡ä»¶ | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| hermes-hook.js æ’ä»¶ | `~/.config/opencode/plugins/hermes-hook.js` | OpenCode äº‹ä»¶ç›‘å¬æ’ä»¶ |
| opencode é…ç½® | `~/.config/opencode/opencode.json` | OpenCode ä¸»é…ç½® |
| æ’ä»¶è°ƒè¯•æ—¥å¿— | `/tmp/hermes-perm-*.json` | permission.asked äº‹ä»¶çš„å®Œæ•´ JSON dump |
| OpenCode è¿è¡Œæ—¥å¿— | `~/.local/share/opencode/log/` | OpenCode è¿›ç¨‹æ—¥å¿— |
| é¡¹ç›®å·¥ä½œåŒº | `/Volumes/Work/Projects/kiroHooks/` | Kiro å·¥ä½œåŒºæ ¹ç›®å½• |

### OpenClaw ä¾§ (openclaw ç”¨æˆ·)

| æ–‡ä»¶ | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| OpenClaw ä¸»é…ç½® | `/Users/openclaw/.openclaw/openclaw.json` | å®Œæ•´é…ç½®ï¼ˆagents, bindings, channels ç­‰ï¼‰ |
| OpenClaw ç®€åŒ–é…ç½® | `/Users/openclaw/.config/openclaw/openclaw.json` | åªæœ‰ gateway + hooks åŸºç¡€é…ç½® |
| Gateway æ—¥å¿— | `/Users/openclaw/.openclaw/logs/gateway.log` | ç½‘å…³æ­£å¸¸æ—¥å¿— |
| Gateway é”™è¯¯æ—¥å¿— | `/Users/openclaw/.openclaw/logs/gateway.err.log` | ç½‘å…³é”™è¯¯æ—¥å¿— |
| Kiro Agent workspace | `/Users/openclaw/.openclaw/agents/kiro/` | kiro agent çš„å·¥ä½œç›®å½• |
| Cron é…ç½® | `/Users/openclaw/.openclaw/cron/jobs.json` | å®šæ—¶ä»»åŠ¡é…ç½® |
| Exec å®¡æ‰¹é…ç½® | `/Users/openclaw/.openclaw/exec-approvals.json` | exec å·¥å…·å®¡æ‰¹è§„åˆ™ |
| Hooks ç›®å½• | `/Users/openclaw/.openclaw/hooks/` | å†…éƒ¨ hook handlers |

---

## 4. OpenClaw Agent é…ç½®

### 4.1 Agent åˆ—è¡¨

| Agent ID | åç§° | ç»‘å®šç¾¤ç»„ | Workspace |
|----------|------|---------|-----------|
| `defaults` | é»˜è®¤ | `-5250445414` | `/Users/openclaw/.openclaw/workspace` |
| `coder` | Coder | `-5245978672` | `/Users/openclaw/.openclaw/workspace-coder` |
| `writer` | Writer | `-5118387098` | `/Users/openclaw/.openclaw/workspace-writer` |
| `hermes` | Hermes | `-5088310983` | `/Users/openclaw/.openclaw/workspace-hermes` |

### 4.2 Bindingsï¼ˆç¾¤ç»„ â†’ Agent æ˜ å°„ï¼‰

```json
[
  {"agentId": "defaults", "match": {"channel": "telegram", "peer": {"kind": "group", "id": "-5250445414"}}},
  {"agentId": "coder",    "match": {"channel": "telegram", "peer": {"kind": "group", "id": "-5245978672"}}},
  {"agentId": "writer",   "match": {"channel": "telegram", "peer": {"kind": "group", "id": "-5118387098"}}},
  {"agentId": "hermes",   "match": {"channel": "telegram", "peer": {"kind": "group", "id": "-5088310983"}}}
]
```

### 4.3 æ¨¡å‹é…ç½®

é»˜è®¤æ¨¡å‹: `minimax/MiniMax-M2.1`
Fallbacks: `kiro/claude-sonnet-4-20250514`, `kiro/claude-opus-4-20241120`

Hermes agent ä½¿ç”¨ `minimax/MiniMax-M2.1`ã€‚

> âš ï¸ æ³¨æ„ï¼š`models.json` ä¸­çš„ provider key `"kiro"` æ˜¯ API è·¯ç”±ç”¨é€”ï¼ˆæŒ‡å‘ localhost:10086 çš„ Kiro ä»£ç†ï¼‰ï¼Œä¸ openclaw.json ä¸­çš„ agent ID `"hermes"` æ˜¯ä¸åŒæ¦‚å¿µã€‚

### 4.4 Telegram é…ç½®

```json
{
  "enabled": true,
  "dmPolicy": "pairing",
  "groupPolicy": "allowlist",
  "streamMode": "partial",
  "groups": {
    "-5245978672": {"requireMention": false},
    "-5118387098": {"requireMention": false},
    "-5250445414": {"requireMention": true},
    "-5088310983": {"requireMention": false}
  }
}
```

---

## 5. Hermes æ’ä»¶é…ç½®

### 5.1 ç¯å¢ƒå˜é‡ (napstablook ~/.zshrc)

```bash
export HERMES_HOOK_TOKEN="c92123915191b5177b9eba7e00aa38c772958003dddf9d5dba5672b8f555de3d"
export HERMES_OPENCLAW_URL="http://localhost:18789"
export HERMES_TELEGRAM_CHANNEL="-5088310983"
```

### 5.2 Webhook Payload æ ¼å¼

å½“å‰ `sendToOpenClaw()` å‘é€åˆ° `POST /hooks/agent`ï¼š

```json
{
  "message": "[HERMES_WEBHOOK â€” è½¬å‘ç»™ç”¨æˆ·ï¼Œä¸è¦è‡ªå·±å¤„ç†] æ¶ˆæ¯å†…å®¹",
  "name": "Hermes",
  "agentId": "hermes",
  "sessionKey": "hermes-notifications",
  "wakeMode": "now",
  "channel": "telegram",
  "to": "-5088310983"
}
```

> âœ… `agentId` å·²ä» `"kiro"` ä¿®æ­£ä¸º `"hermes"`ï¼Œä¸ openclaw.json ä¸­ `agents.list[].id` ä¸€è‡´ï¼Œç¡®ä¿ webhook æ¶ˆæ¯è·¯ç”±åˆ°æ­£ç¡®çš„ Hermes agentã€‚

### 5.3 ç›‘å¬çš„äº‹ä»¶

| äº‹ä»¶ | å¤„ç† | å‘é€æ ¼å¼ |
|------|------|---------|
| `session.idle` | è·å–æœ€å assistant æ¶ˆæ¯ â†’ æˆªæ–­ â†’ å‘é€ | `ğŸ“‹ PHASE_COMPLETE\n\n---\n\n{content}` |
| `permission.asked` | æå– sid/pid/command â†’ è¯„ä¼°é£é™© â†’ æ„å»ºå«é¢„æ„å»º curl å‘½ä»¤çš„æ¶ˆæ¯ â†’ å‘é€ | `ğŸ”´ éœ€è¦ç¡®è®¤ [{type}]\nå‘½ä»¤: {cmd}\né£é™©: {risk}\n---\nRUN/ALWAYS/REJECT curl å‘½ä»¤` |
| `session.error` | æå–é”™è¯¯ä¿¡æ¯ â†’ å‘é€ | `âŒ ERROR: {message}` |

---

## 6. OpenCode HTTP API

| ç«¯ç‚¹ | æ–¹æ³• | ç”¨é€” | æ³¨æ„ |
|------|------|------|------|
| `/session` | GET | åˆ—å‡ºæ‰€æœ‰ session | |
| `/session` | POST | åˆ›å»ºæ–° session | |
| `/session/:id/prompt_async` | POST | å¼‚æ­¥å‘é€æ¶ˆæ¯ | âœ… æ¨èï¼Œè¿”å› 204 |
| `/session/:id/message` | POST | åŒæ­¥å‘é€æ¶ˆæ¯ | âš ï¸ ä¼šé˜»å¡ï¼Œä¸æ¨è |
| `/session/:id/abort` | POST | ä¸­æ­¢ session | |
| `/session/:id/permissions/:pid` | POST | å›å¤æƒé™è¯·æ±‚ | body: `{"response":"once/always/reject"}` |

---

## 7. å†…éƒ¨ Hooks

### kiro-inbound-bridge

ä½ç½®: `/Users/openclaw/.openclaw/hooks/kiro-inbound-bridge/`

åŠŸèƒ½: ç›‘å¬ `/kiro` å‘½ä»¤ï¼Œæ‰§è¡Œ bridge è„šæœ¬è½¬å‘åˆ° Kiro IDEã€‚

è„šæœ¬è·¯å¾„: `/Volumes/Work/Projects/kiroHooks/.kiro/scripts/inbound-bridge.sh`

---

## 8. Cron Jobs

| Job | Agent | çŠ¶æ€ | è¯´æ˜ |
|-----|-------|------|------|
| code-agent-heartbeat | defaults | âŒ disabled | æ¯1å°æ—¶å¿ƒè·³ |
| moltbook-checkin | defaults | âŒ disabled | æ¯2å°æ—¶æ£€æŸ¥ Moltbook |
| æ¯æ—¥AIèµ„è®¯æ±‡æ€» | kiro | âœ… enabled | æ¯æ—¥8ç‚¹ï¼Œä½† last error: `model not allowed: zai/glm-4.7` |

---
